const express = require('express'); const cors = require('cors'); const config = require('./config'); const db = require('./db'); const app = express(); const port = config.port || 3000; const employeesRouter = require('./routes/employees'); const departmentsRouter = require('./routes/departments'); app.use(cors()); app.use(express.json()); app.use('/api/employees', employeesRouter); app.use('/api/departments', departmentsRouter); app.get('/', (req, res) => { res.send('Hello World!'); }); app.get('/api/db-test', async (req, res) => { try { const [rows] = await db.query('SELECT NOW()'); res.json(rows[0]); } catch (err) { console.error(err); res.status(500).send('Database connection test failed'); } }); app.listen(port, () => { console.log(`Server is running on port ${port}`); });
