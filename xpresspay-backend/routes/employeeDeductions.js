const express = require('express'); const router = express.Router(); const db = require('../db'); router.get('/:userid', async (req, res) => { try { const [rows] = await db.query('SELECT * FROM employee_deductions WHERE userid = ?', [req.params.userid]); res.json(rows); } catch (err) { console.error(err); res.status(500).send('Server Error'); } }); router.post('/', async (req, res) => { try { const { userid, deduction_id, active, start_date, end_date } = req.body; const [result] = await db.query('INSERT INTO employee_deductions (userid, deduction_id, active, start_date, end_date) VALUES (?, ?, ?, ?, ?)', [userid, deduction_id, active, start_date, end_date]); res.json({ id: result.insertId }); } catch (err) { console.error(err); res.status(500).send('Server Error'); } }); module.exports = router;
