const express = require('express'); const router = express.Router(); const db = require('../db'); router.get('/:userid', async (req, res) => { try { const [rows] = await db.query('SELECT * FROM employee_incomes WHERE userid = ?', [req.params.userid]); res.json(rows); } catch (err) { console.error(err); res.status(500).send('Server Error'); } }); router.post('/', async (req, res) => { try { const { userid, income_type, amount, pay_type, effective_from, effective_to, active, note } = req.body; const [result] = await db.query('INSERT INTO employee_incomes (userid, income_type, amount, pay_type, effective_from, effective_to, active, note) VALUES (?, ?, ?, ?, ?, ?, ?, ?)', [userid, income_type, amount, pay_type, effective_from, effective_to, active, note]); res.json({ id: result.insertId }); } catch (err) { console.error(err); res.status(500).send('Server Error'); } }); module.exports = router;
